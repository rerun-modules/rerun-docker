<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='content-type' content='text/html;charset=utf-8'>
    <title>functions.sh</title>
    <link rel="stylesheet" media="all" href="http://jashkenas.github.io/docco/resources/linear/public/stylesheets/normalize.css" />
    <link rel="stylesheet" media="all" href="http://jashkenas.github.io/docco/resources/linear/docco.css" />
</head>
<body>
<div class="container">
  <div class="page">
        <div class="header"><h1>functions.sh</h1></div>
        <p>Shell functions for the docker module.</p>

<div class="highlight"><pre>
<span class="c">#/ usage: source RERUN_MODULE_DIR/lib/functions.sh command</span>

</pre></div>

<p>Read rerun's public functions</p>

<div class="highlight"><pre>
. <span class="nv">$RERUN</span> <span class="o">||</span> <span class="o">{</span>
    <span class="nb">echo</span> &gt;<span class="p">&amp;</span><span class="m">2</span> <span class="s2">&quot;ERROR: Failed sourcing rerun function library: \&quot;</span><span class="nv">$RERUN</span><span class="s2">\&quot;&quot;</span>
    <span class="k">return</span> 1
<span class="o">}</span>

</pre></div>

<p>Check usage. Argument should be command name.</p>

<div class="highlight"><pre>
<span class="o">[[</span> <span class="nv">$# </span><span class="o">=</span> <span class="m">1</span> <span class="o">]]</span> <span class="o">||</span> rerun_option_usage

</pre></div>

<p>Source the option parser script.</p>

<div class="highlight"><pre>
<span class="k">if</span> <span class="o">[[</span> -r <span class="nv">$RERUN_MODULE_DIR</span>/commands/<span class="nv">$1</span>/options.sh <span class="o">]]</span>
<span class="k">then</span>
    . <span class="nv">$RERUN_MODULE_DIR</span>/commands/<span class="nv">$1</span>/options.sh <span class="o">||</span> <span class="o">{</span>
        rerun_die <span class="s2">&quot;Failed loading options parser.&quot;</span>
    <span class="o">}</span>
<span class="k">fi</span>

</pre></div>

<hr />

<p>Your functions declared here.</p>

<hr />

<div class="highlight"><pre>

<span class="k">function</span> last_container_started <span class="o">{</span>
  docker ps -a -q -l
<span class="o">}</span>

<span class="k">function</span> last_container_exited <span class="o">{</span>
  docker ps -a -q -l -f <span class="nv">status</span><span class="o">=</span>exited
<span class="o">}</span>


</pre></div>

<div class="highlight"><pre>

</pre></div>
  </div>
  <div class="fleur">h</div>

</div>
</body>
</html>
